<ui:composition template="#{ themeManager.backendTemplatePath }" 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:aplos="http://www.aplossystems.co.uk/aplosComponents"
	xmlns:aploscc="http://java.sun.com/jsf/composite/components">
	
	<ui:define name="title">Aplos Systems - Forgotten Password page</ui:define>

	<ui:define name="body">
	<div style="min-height: 400px; margin: auto; margin-bottom: 40px; display: table; min-width: 600px; border: 2px solid #C9D9F9; border-top: none; border-bottom: none; padding: 0px 50px;">
	
		<ui:insert name="heading"><h2>Forgotten #{ loginPage.applicationName } Password</h2></ui:insert>
		
		<h:form id="forgot" prependId="false" >
			
			<aplos:panel rendered="#{ forgottenPasswordSent != null }">
				<h3>An email has been sent to #{backingPage.emailAddressUsed}</h3><br/><br/>
				<div style="text-align:left;">
					Please open the email and follow the instructions.
					<br/>
					If you do not receive the email, please check your 'Junk Box'
					<br/><br/>
					Alternatively, contact the #{ commonConfiguration.defaultCompanyDetails.companyName } team for assistance.
	        		<br/><br/>
	        		<aploscc:ajaxButton action="#{ backingPage.goToLoginPage }" value="Return to login screen" />
	        	</div>
	        </aplos:panel>
			<aplos:panel rendered="#{ forgottenPasswordSent == null and emailAddressNotRecognised == null }">
	             <table class="aplos-form-table">
					<tr>
	           			<td class="aplos-label">Your Username</td>
	           			<td class="aplos-field"> 
	           				<h:inputText onfocus="this.select()" name="username" id="username" value="#{backingPage.username}" alt="username" class="input_rev" style="width:200px" />  
	           			</td>
	          	 	</tr>
					<tr>
						<td colspan="2" style="text-align:right;">
							<aploscc:ajaxButton action="#{ backingPage.resetPassword }" value="Continue" />
						</td>
					</tr>
				</table>
	        </aplos:panel>
	       	<aplos:panel rendered="#{ usernameNotRecognised != null }">
	       		<h3>Your username was not recognised.</h3>
				<aploscc:ajaxButton action="#{ backingPage.resetUsernameNotRecognised }" value="Try Again" />
	        </aplos:panel>

		</h:form>
		
	</div>
	</ui:define>
</ui:composition>